{
  "version": 3,
  "sources": [
    "/home/travis/build/qooxdoo/qxl.playground/source/class/qxl/playground/Application.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "application",
    "Standalone",
    "properties",
    "name",
    "check",
    "apply",
    "init",
    "originCode",
    "currentSample",
    "event",
    "nullable",
    "members",
    "__header",
    "__mainsplit",
    "__toolbar",
    "__log",
    "__editor",
    "__playArea",
    "__samplesPane",
    "__editorsplit",
    "__websiteContent",
    "__samples",
    "__store",
    "__history",
    "__urlShorter",
    "__currentStandalone",
    "__ignoreSaveFaults",
    "__modified",
    "__beforeReg",
    "__afterReg",
    "__oldCode",
    "__errorMsg",
    "locale",
    "Manager",
    "tr",
    "__mode",
    "__maximized",
    "main",
    "GlobalError",
    "setErrorHandler",
    "__onGlobalError",
    "layout",
    "ui",
    "VBox",
    "mainContainer",
    "container",
    "Composite",
    "getRoot",
    "add",
    "edge",
    "qxl",
    "playground",
    "view",
    "Header",
    "flex",
    "addListener",
    "_onChangeMode",
    "Toolbar",
    "run",
    "__onSampleChange",
    "__onHighlightChange",
    "__onLogChange",
    "__onUrlShorten",
    "__onApiOpen",
    "__onManualOpen",
    "__onDemoBrowser",
    "splitpane",
    "Pane",
    "setAppearance",
    "setDecorator",
    "infosplit",
    "Samples",
    "__onSave",
    "__onSaveAs",
    "__onDelete",
    "__onRename",
    "bind",
    "e",
    "__discardChanges",
    "stop",
    "setCurrentSample",
    "getData",
    "data",
    "store",
    "Offline",
    "getModel",
    "setModel",
    "Editor",
    "enableHighlighting",
    "loadAce",
    "PlayArea",
    "_onToggleMaximize",
    "getChildControl",
    "block",
    "unblock",
    "logpane",
    "LogPane",
    "exclude",
    "__supportsMode",
    "bom",
    "Cookie",
    "get",
    "setMode",
    "setEnabledMode",
    "__initBookmarkSupport",
    "useHighlight",
    "showExamples",
    "_applyName",
    "value",
    "old",
    "updateCaption",
    "__updateTitle",
    "_applyOriginCode",
    "_applyCurrentSample",
    "newSample",
    "getMode",
    "setCode",
    "getCode",
    "setOriginCode",
    "getCategory",
    "addToHistory",
    "getName",
    "__addCodeToHistory",
    "setName",
    "__enableWebsiteMode",
    "enabled",
    "show",
    "WebsiteContent",
    "getChildren",
    "mode",
    "getOldData",
    "getFirstSample",
    "engine",
    "core",
    "Environment",
    "parseInt",
    "Error",
    "set",
    "current",
    "getCurrentSample",
    "window",
    "prompt",
    "samples",
    "i",
    "length",
    "getItem",
    "confirm",
    "code",
    "category",
    "sample",
    "marshal",
    "Json",
    "createModel",
    "push",
    "select",
    "remove",
    "open",
    "encodeURIComponent",
    "location",
    "href",
    "History",
    "getInstance",
    "__onHistoryChanged",
    "state",
    "getState",
    "replace",
    "isAvailable",
    "indexOf",
    "substring",
    "charAt",
    "__parseURLCode",
    "selectByCode",
    "__isCodeNotEqual",
    "lang",
    "parse",
    "decodeURIComponent",
    "error",
    "codeJson",
    "userCode",
    "getOriginCode",
    "code1",
    "code2",
    "compareElem1",
    "document",
    "getElementById",
    "innerHTML",
    "compareElem2",
    "label",
    "title",
    "split",
    "__updatePlayground",
    "exc",
    "clear",
    "reset",
    "reg",
    "$$registry",
    "toString",
    "fun",
    "observeMethod",
    "Function",
    "ex",
    "queue",
    "flush",
    "Object",
    "clone",
    "ObjectRegistry",
    "getRegistry",
    "call",
    "getApp",
    "__isAppClass",
    "__executeStandaloneApp",
    "showLog",
    "fetch",
    "clazz",
    "superclass",
    "classname",
    "self",
    "prototype",
    "_createRootWidget",
    "app",
    "destruct",
    "_disposeObjects",
    "Application"
  ],
  "mappings": "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",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2008-2009 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Andreas Ecker (ecker)\n     * Yuecel Beser (ybeser)\n     * Jonathan Weiß (jonathan_rass)\n     * Martin Wittemann (martinwittemann)\n\n************************************************************************ */\n\n/**\n * Playground application, which allows for source code editing and live\n * previews of a simple custom application.\n *\n * @ignore(location.*)\n * @asset(qx/icon/Tango/22/*)\n * \n */\nqx.Class.define(\"qxl.playground.Application\",\n{\n  extend : qx.application.Standalone,\n\n\n  properties :\n  {\n    /** The name of the current application.*/\n    name : {\n      check : \"String\",\n      apply : \"_applyName\",\n      init: \"\"\n    },\n\n\n    /** Code to check agains as unchanged source of the loaded code.*/\n    originCode : {\n      check : \"String\",\n      apply : \"_applyOriginCode\",\n      init : \"\"\n    },\n\n\n    /** The current selected sample model. */\n    currentSample : {\n      apply : \"_applyCurrentSample\",\n      event : \"changeCurrentSample\",\n      nullable : true\n    }\n  },\n\n\n  /*\n   *****************************************************************************\n      MEMBERS\n   *****************************************************************************\n  */\n  members :\n  {\n    // UI Components\n    __header : null,\n    __mainsplit : null,\n    __toolbar : null,\n    __log : null,\n    __editor : null,\n    __playArea : null,\n    __samplesPane : null,\n    __editorsplit : null,\n    __websiteContent : null,\n\n    // storages\n    __samples : null,\n    __store : null,\n\n    __history : null,\n    __urlShorter : null,\n\n    __currentStandalone: null,\n\n    // flag used for the warning for IE\n    __ignoreSaveFaults : false,\n\n    __modified : false,\n\n    // used for removing the created objects in the run code\n    __beforeReg : null,\n    __afterReg : null,\n    __oldCode : null,\n\n    __errorMsg: qx.locale.Manager.tr(\n      \"Unfortunately, an unrecoverable internal error was caused by your code.\" +\n      \" This may prevent the playground application to run properly.||\"\n    ),\n\n    __mode : null,\n    __maximized : null,\n\n    /**\n     * This method contains the initial application code and gets called\n     * during startup of the application.\n     */\n    main : function()\n    {\n      // Call super class\n      this.base(arguments);\n\n      // register error handler\n      qx.event.GlobalError.setErrorHandler(this.__onGlobalError, this);\n\n      // container layout\n      var layout = new qx.ui.layout.VBox();\n\n      // main container\n      var mainContainer = new qx.ui.container.Composite(layout);\n      this.getRoot().add(mainContainer, { edge : 0 });\n\n      // qooxdoo header\n      this.__header = new qxl.playground.view.Header();\n      mainContainer.add(this.__header, { flex : 0 });\n      this.__header.addListener(\"changeMode\", this._onChangeMode, this);\n\n      // toolbar\n      this.__toolbar = new qxl.playground.view.Toolbar();\n      mainContainer.add(this.__toolbar, { flex : 0 });\n\n      // toolbar listener\n      this.__toolbar.addListener(\"run\", this.run, this);\n      this.__toolbar.addListener(\"changeSample\", this.__onSampleChange, this);\n      this.__toolbar.addListener(\"changeHighlight\", this.__onHighlightChange, this);\n      this.__toolbar.addListener(\"changeLog\", this.__onLogChange, this);\n      this.__toolbar.addListener(\"shortenUrl\", this.__onUrlShorten, this);\n      this.__toolbar.addListener(\"openApi\", this.__onApiOpen, this);\n      this.__toolbar.addListener(\"openManual\", this.__onManualOpen, this);\n      this.__toolbar.addListener(\"openDemoBrowser\",this.__onDemoBrowser,this);\n\n      // mainsplit, contains the editor splitpane and the info splitpane\n      this.__mainsplit = new qx.ui.splitpane.Pane(\"horizontal\");\n      mainContainer.add(this.__mainsplit, { flex : 1 });\n      this.__mainsplit.setAppearance(\"app-splitpane\");\n\n      // editor split (left side of main split)\n      this.__editorsplit = new qx.ui.splitpane.Pane(\"horizontal\");\n      this.__editorsplit.setDecorator(null); // get rid of the 3px broder\n      // info split (right side of the main split)\n      var infosplit = new qx.ui.splitpane.Pane(\"vertical\");\n      infosplit.setDecorator(null);\n\n      // examples pane\n      this.__samplesPane = new qxl.playground.view.Samples();\n      this.__samplesPane.addListener(\"save\", this.__onSave, this);\n      this.__samplesPane.addListener(\"saveAs\", this.__onSaveAs, this);\n      this.__samplesPane.addListener(\"delete\", this.__onDelete, this);\n      this.__samplesPane.addListener(\"rename\", this.__onRename, this);\n      this.bind(\"currentSample\", this.__samplesPane, \"currentSample\");\n      this.__samplesPane.addListener(\"beforeSelectSample\", function(e) {\n        if (this.__discardChanges()) {\n          e.stop();\n        }\n      }, this);\n      this.__samplesPane.addListener(\"selectSample\", function(e) {\n        this.setCurrentSample(e.getData());\n      }, this);\n\n      // initialize custom samples\n      this.__store = new qx.data.store.Offline(\"qooxdoo-playground-samples\");\n      // if the local storage is not empty\n      if (this.__store.getModel() != null) {\n        // use the stored array to initialize the built in samples\n        this.__samples = new qxl.playground.Samples(this.__store.getModel());\n      } else {\n        // init the samples and store in the local storage\n        this.__samples = new qxl.playground.Samples();\n        this.__store.setModel(this.__samples.getModel());\n      }\n      this.__store.bind(\"model\", this.__samplesPane, \"model\");\n\n\n      // need to split up the creation process\n      this.__editor = new qxl.playground.view.Editor();\n      this.__editor.addListener(\"disableHighlighting\", function() {\n        this.__toolbar.enableHighlighting(false);\n      }, this);\n      qxl.playground.view.Editor.loadAce(function() {\n        this.init();\n      }, this);\n\n      this.__editorsplit.add(this.__samplesPane, 1);\n      this.__editorsplit.add(this.__editor, 4);\n      this.__mainsplit.add(this.__editorsplit, 6);\n      this.__mainsplit.add(infosplit, 3);\n\n      this.__playArea = new qxl.playground.view.PlayArea();\n      this.__playArea.addListener(\"toggleMaximize\", this._onToggleMaximize, this);\n      infosplit.add(this.__playArea, 2);\n\n      this.__mainsplit.getChildControl(\"splitter\").addListener(\"pointerdown\", function() {\n        this.__editor.block();\n      }, this);\n\n      this.__mainsplit.addListener(\"losecapture\", function() {\n        this.__editor.unblock();\n      }, this);\n\n      this.__log = new qxl.logpane.LogPane();\n\n      infosplit.add(this.__log, 1);\n      this.__log.exclude();\n    },\n\n\n    /**\n     * Initialization after the external editor has been loaded.\n     */\n    init: function() {\n      this.__editor.init();\n\n      // check if mobile chould be used\n      if (this.__supportsMode(\"mobile\")) {\n        // check for the mode cookie\n        if (qx.bom.Cookie.get(\"playgroundMode\") === \"mobile\") {\n          this.setMode(\"mobile\");\n        } else {\n          this.setMode(\"ria\");\n        }\n      } else {\n        this.setMode(\"ria\");\n        this.__header.setEnabledMode(\"mobile\", false);\n      }\n\n      // Back button and bookmark support\n      this.__initBookmarkSupport();\n\n      // check for the highlight and examples cookie\n      if (qx.bom.Cookie.get(\"playgroundHighlight\") === \"false\") {\n        this.__editor.useHighlight(false);\n      }\n      if (qx.bom.Cookie.get(\"playgroundShowExamples\") === \"false\") {\n        this.__toolbar.showExamples(false);\n      }\n    },\n\n\n    // ***************************************************\n    // PROPERTY APPLY\n    // ***************************************************\n    // property apply\n    _applyName : function(value, old) {\n      if (!this.__playArea) {\n        return;\n      }\n      this.__playArea.updateCaption(value);\n      this.__updateTitle(value);\n    },\n\n\n    // property apply\n    _applyOriginCode : function(value, old) {\n      this.__modified = false;\n    },\n\n\n    // property apply\n    _applyCurrentSample : function(newSample, old) {\n      // ignore when the sample is set to null\n      if (!newSample) {\n        return;\n      }\n\n      this.setMode(newSample.getMode());\n\n      // need to get the code from the editor in case he changes something\n      // in the code\n      this.__editor.setCode(newSample.getCode());\n      this.setOriginCode(this.__editor.getCode());\n\n      // only add static samples to the url as name\n      if (newSample.getCategory() == \"static\") {\n        this.__history.addToHistory(newSample.getName() + \"-\" + newSample.getMode());\n      } else {\n        this.__addCodeToHistory(newSample.getCode());\n      }\n\n      this.setName(newSample.getName());\n      // run the new sample\n      this.run();\n    },\n\n\n    // ***************************************************\n    // MODE HANDLING\n    // ***************************************************\n    __enableWebsiteMode : function(enabled) {\n      if (enabled) {\n        this.__toolbar.exclude();\n        this.__mainsplit.exclude();\n      } else {\n        this.__toolbar.show();\n        this.__mainsplit.show();\n      }\n\n      // on demand creation\n      if (!this.__websiteContent && enabled) {\n        this.__websiteContent = new qxl.playground.view.WebsiteContent();\n        this.getRoot().getChildren()[0].add(this.__websiteContent, {flex: 1});\n      }\n\n      if (this.__websiteContent) {\n        if (!enabled) {\n          this.__websiteContent.exclude();\n        } else {\n          this.__websiteContent.show();\n        }\n      }\n\n    },\n\n    /**\n     * Event handler for changing the mode of the palyground.\n     * @param e {qx.event.type.Data} The data event containing the mode.\n     */\n    _onChangeMode : function(e) {\n      var mode = e.getData();\n      // ignore setting the same mode\n      if (mode == this.__mode) {\n        return;\n      }\n\n      if (!this.setMode(mode)) {\n        this.__header.setMode(e.getOldData());\n      } else {\n        // select the first sample\n        this.setCurrentSample(this.__samples.getFirstSample(mode));\n      }\n    },\n\n\n    /**\n     * Helper to determinate if the mode is currently supported e.g. mobile\n     * in the current runtime.\n     * @param mode {String} The name of the mode.\n     * @return {boolean} <code>true</code>, if the given mode can be used.\n     */\n    __supportsMode : function(mode) {\n      if (mode == \"mobile\") {\n        var engine = qx.core.Environment.get(\"engine.name\");\n\n        // all webkits are ok\n        if (engine == \"webkit\") {\n          return true;\n        }\n        // ie > 10 is ok\n        if (engine == \"mshtml\" && parseInt(qx.core.Environment.get(\"browser.documentmode\")) >= 10) {\n          return true;\n        }\n        // ff > 10 is ok\n        if (engine == \"gecko\" && parseInt(qx.core.Environment.get(\"engine.version\")) >= 10) {\n          return true;\n        }\n      } else if (mode == \"ria\" || mode == \"website\") {\n        return true;\n      }\n      return false;\n    },\n\n\n    /**\n     * Setter and dispatcher for the current mode the playground is in.\n     * @param mode {String} The mode to use.\n     */\n    setMode : function(mode) {\n      // check if the mode is supported\n      if (!this.__supportsMode(mode)) {\n        throw new Error(\"Mode '\" + mode + \"' not supported\");\n      }\n\n      // only set new mode if not already set\n      if (this.__mode == mode) {\n        return true;\n      }\n\n      // only change the mode if no code gets lost\n      if (this.__discardChanges()) {\n        return false;\n      }\n\n      // store the mode\n      qx.bom.Cookie.set(\"playgroundMode\", mode, 100);\n      this.__mode = mode;\n\n      this.__enableWebsiteMode(mode == \"website\");\n\n      // update the views (changes the play application)\n      this.__playArea.setMode(mode);\n      this.__header.setMode(mode);\n      this.__samplesPane.setMode(mode);\n\n      // erase the code\n      this.__editor.setCode(\"\");\n\n      return true;\n    },\n\n\n    // ***************************************************\n    // SAMPEL SAVE / DELETE\n    // ***************************************************\n    /**\n     * Helper to write the current code to the model and with that to the\n     * offline store.\n     */\n    __onSave : function() {\n      var current = this.getCurrentSample();\n\n      // if we don't have a current sample and the sample is a static one\n      if (!current || current.getCategory() == \"static\") {\n        this.__onSaveAs();\n      // if its a user sample which is selected, we just store the new code\n      } else {\n        // store in curent sample\n        current.setCode(this.__editor.getCode());\n        this.setOriginCode(current.getCode());\n        // set the name to make sure no \"changed\" state is displayed\n        this.setName(current.getName());\n      }\n    },\n\n\n    /**\n     * Helper to write the current code to the model and with that to the\n     * offline store.\n     * @lint ignoreDeprecated(confirm)\n     */\n    __onSaveAs : function() {\n      // ask the user for a new name for the property\n      var name = window.prompt(this.tr(\"Please enter a name\"), \"\"); // empty value string of IE\n      if (!name) {\n        return;\n      }\n      // check for overriding sample names\n      var samples = this.__store.getModel();\n      for (var i = 0; i < samples.length; i++) {\n        if (samples.getItem(i).getName() == name) {\n          if (window.confirm(this.tr(\"Sample already exists. Do you want to overwrite?\"))) {\n            this.__onSave();\n          }\n          return;\n        }\n      };\n      // create new sample\n      var data = {\n        name: name,\n        code: this.__editor.getCode(),\n        mode: this.__mode,\n        category: \"user\"\n      };\n      var sample = qx.data.marshal.Json.createModel(data, true);\n      // push the data to the model (storest automatically)\n      this.__store.getModel().push(sample);\n      // store the origin code and select the new sample\n      this.setOriginCode(sample.getCode());\n      this.__samplesPane.select(sample);\n    },\n\n\n    /**\n     * Helper to delete the selected sample.\n     */\n    __onDelete : function() {\n      var current = this.getCurrentSample();\n      // if we have a sample selected and its not a static one\n      if (current || current.getCategory() != \"static\") {\n        // remove the selection\n        this.__samplesPane.select(null);\n        // delete the current sample\n        this.__store.getModel().remove(current);\n        // reset the current selected sample\n        this.setCurrentSample(null);\n      }\n    },\n\n\n    /**\n     * Helper to rename a sample.\n     */\n    __onRename : function() {\n      var current = this.getCurrentSample();\n      // if we have a sample and its not a static one\n      if (current || current.getCategory() != \"static\") {\n        // ask the user for a new name\n        var name = window.prompt(this.tr(\"Please enter a name\"), current.getName());\n        if (!name) {\n          return;\n        }\n        // just write the new name to the to the sample\n        current.setName(name);\n      }\n    },\n\n\n    /**\n     * Helper to toggle the editors split pane which means togglinge the\n     * visibility of the editor and the samples pane.\n     */\n    _onToggleMaximize : function() {\n      this.__maximized = !this.__maximized;\n      if (this.__maximized) {\n        this.__editorsplit.exclude();\n      } else {\n        this.__editorsplit.show();\n      }\n    },\n\n\n    // ***************************************************\n    // TOOLBAR HANDLER\n    // ***************************************************\n    /**\n     * Handler for sample changes of the toolbar.\n     * @param e {qx.event.type.Data} Data event containing the boolean\n     * weather the examples should be shown.\n     */\n    __onSampleChange : function(e) {\n      qx.bom.Cookie.set(\"playgroundShowExamples\", e.getData(), 100);\n      if (e.getData()) {\n        this.__samplesPane.show();\n      } else {\n        this.__samplesPane.exclude();\n      }\n    },\n\n\n    /**\n     * Handler for the changeHighlight event of the toolbar.\n     * @param e {qx.event.type.Data} Data event containing the boolean to change\n     *   the highlighted code view.\n     */\n    __onHighlightChange : function(e) {\n      qx.bom.Cookie.set(\"playgroundHighlight\", e.getData(), 100);\n      this.__editor.useHighlight(e.getData());\n    },\n\n\n    /**\n     * Handler for showing the log of the toolbar.\n     * @param e {qx.event.type.Data} Data event containing if the log should\n     *   be shown.\n     */\n    __onLogChange : function(e) {\n      e.getData() ? this.__log.show() : this.__log.exclude();\n    },\n\n\n    /**\n     * Handler for the url shortening service.\n     */\n    __onUrlShorten : function() {\n      window.open(\n        \"http://tinyurl.com/create.php?url=\" + encodeURIComponent(location.href),\n        \"tinyurl\",\n        \"width=800,height=600,resizable=yes,scrollbars=yes\"\n      );\n    },\n\n\n    /**\n     * Handler for opening the api viewer.\n     */\n    __onApiOpen : function() {\n      window.open((qx.core.Environment.get(\"qx.serve.appspath\") || \"https://www.qooxdoo.org/qxl.\") + \"apiviewer/\");\n    },\n\n\n    /**\n     * Handler for opening the manual.\n     */\n    __onManualOpen : function() {\n      window.open((qx.core.Environment.get(\"qx.serve.docspath\") || \"https://www.qooxdoo.org/\") +  \"docs\");\n    },\n\n\n    /**\n     * Handler for opening the demo browser.\n     */\n    __onDemoBrowser : function() {\n      window.open((qx.core.Environment.get(\"qx.serve.appspath\") || \"https://www.qooxdoo.org/qxl.\") +  \"widgetbrowser/\");\n    },\n\n    // ***************************************************\n    // HISTORY SUPPORT\n    // ***************************************************\n    /**\n     * Back button and bookmark support\n     */\n    __initBookmarkSupport : function()\n    {\n      this.__history = qx.bom.History.getInstance();\n      this.__history.addListener(\"changeState\", this.__onHistoryChanged, this);\n\n      // Handle bookmarks\n      var state = this.__history.getState();\n      var name = state.replace(/_/g, \" \");\n\n      var code = \"\";\n\n      // checks if the state corresponds to a sample. If yes, the application\n      // will be initialized with the selected sample\n      if (state && this.__samples.isAvailable(state))\n      {\n        var sample = this.__samples.get(state);\n        this.setCurrentSample(sample);\n        return;\n\n      // check if a mode is given\n      } else if (state.indexOf(\"mode=\") == 0) {\n        var mode = state.substring(5, state.length);\n        if (mode == \"mobile\") {\n          // try to set the mobile mode but if its not supported, take ria\n          try {\n            this.setMode(\"mobile\");\n          } catch (e) {\n            this.setMode(\"ria\");\n          }\n        } else {\n          this.setMode(\"ria\");\n        }\n        var sample = this.__samples.getFirstSample(this.__mode);\n        this.setCurrentSample(sample);\n        return;\n\n      // if there is a state given\n      } else if (state && state.charAt(0) == \"{\") {\n        var name = this.tr(\"Custom Code\");\n        code = this.__parseURLCode(state);\n        // need to get the code from the editor in case he changes something\n        // in the code\n        this.__editor.setCode(code);\n        this.setOriginCode(this.__editor.getCode());\n\n        // try to select a custom sample\n        this.__samplesPane.selectByCode(code);\n\n        this.setName(name);\n        this.run();\n\n      // if no state is given\n      } else {\n        var sample = this.__samples.getFirstSample(this.__mode);\n        this.setCurrentSample(sample);\n        return;\n      }\n    },\n\n\n    /**\n     * Handler for changes of the history.\n     * @param e {qx.event.type.Data} Data event containing the history changes.\n     */\n    __onHistoryChanged : function(e)\n    {\n      var state = e.getData();\n\n      // is a sample name given\n      if (this.__samples.isAvailable(state))\n      {\n        var sample = this.__samples.get(state);\n        if (this.__isCodeNotEqual(sample.getCode(), this.__editor.getCode())) {\n          this.setCurrentSample(sample);\n        }\n\n      // is code given\n      } else if (state != \"\") {\n        var code = this.__parseURLCode(state);\n        if (code != this.__editor.getCode()) {\n          this.__editor.setCode(code);\n          this.setName(this.tr(\"Custom Code\"));\n          this.run();\n        }\n      }\n    },\n\n\n    /**\n     * Helper method for parsing the given url parameter to a valid code\n     * fragment.\n     * @param state {String} The given state of the browsers history.\n     * @return {String} A valid code snippet.\n     */\n    __parseURLCode : function(state)\n    {\n      try {\n        var data = qx.lang.Json.parse(state);\n        // change the mode in case a different mode is given\n        if (data.mode && data.mode != this.__mode) {\n          this.setMode(data.mode);\n        }\n        return decodeURIComponent(data.code).replace(/%0D/g, \"\");\n      } catch (e) {\n        var error = this.tr(\"// Could not handle URL parameter! \\n// %1\", e);\n\n        if (qx.core.Environment.get(\"engine.name\") == \"mshtml\") {\n          error += this.tr(\"// Your browser has a length restriction of the \" +\n                          \"URL parameter which could have caused the problem.\");\n        }\n        return error;\n      }\n    },\n\n\n    /**\n     * Adds the given code to the history.\n     * @param code {String} the code to add.\n     * @lint ignoreDeprecated(confirm)\n     */\n    __addCodeToHistory : function(code) {\n      var codeJson =\n        '{\"code\":' + '\"' + encodeURIComponent(code) + '\", \"mode\":\"' + this.__mode + '\"}';\n      if (qx.core.Environment.get(\"engine.name\") == \"mshtml\" && codeJson.length > 1300) {\n        if (!this.__ignoreSaveFaults && window.confirm(\n          this.tr(\"Cannot append sample code to URL, as it is too long. \" +\n                  \"Disable this warning in the future?\"))\n        ) {\n          this.__ignoreSaveFaults = true;\n        };\n        return;\n      }\n      this.__history.addToHistory(codeJson);\n    },\n\n\n    // ***************************************************\n    // UPDATE & RUN & COMPARE\n    // ***************************************************\n    /**\n     * Checcks if the code is changed. If that is the case, the user will be\n     * prompted to discard the changes.\n     *\n     * @lint ignoreDeprecated(confirm)\n     * @return {Boolean} <code>true</code> if the code has been modified\n     */\n    __discardChanges : function() {\n      var userCode = this.__editor.getCode();\n      if (userCode && this.__isCodeNotEqual(userCode, this.getOriginCode())) {\n        if (!window.confirm(this.tr(\"Tap OK to discard your changes.\"))) {\n          return true;\n        }\n      }\n      return false;\n    },\n\n\n    /**\n     * Special compare method for IE.\n     * @param code1 {String} The first code to compare.\n     * @param code2 {String} The second code to compare.\n     * @return {Boolean} true, if the code is equal.\n     */\n    __isCodeNotEqual : function(code1, code2)\n    {\n      if (qx.core.Environment.get(\"engine.name\") == \"opera\") {\n        code1 = code1.replace(/\\r?\\n/g, \"\\n\");\n        code2 = code2.replace(/\\r?\\n/g, \"\\n\");\n        return code1 != code2;\n      }\n\n      var compareElem1 = document.getElementById(\"compare_div1\");\n      compareElem1.innerHTML = code1;\n\n      var compareElem2 = document.getElementById(\"compare_div2\");\n      compareElem2.innerHTML = code2;\n\n      return (compareElem1.innerHTML.length != compareElem2.innerHTML.length ||\n        compareElem1.innerHTML != compareElem2.innerHTML);\n    },\n\n\n    /**\n     * Update the window title with given sample label\n     * @param label {String} sample label\n     * @return {String} new window title\n     */\n    __updateTitle : function(label) {\n      var title = document.title.split(\":\")[0] + \": \" + label;\n      return title;\n    },\n\n\n    /**\n     * Updates the qxl.playground.\n     */\n    __updatePlayground : function()\n    {\n      var exc;\n      this.__log.clear();\n      this.__playArea.reset(this.__beforeReg, this.__afterReg, this.__oldCode);\n\n      var reg = qx.Class.$$registry;\n      delete reg[this.__currentStandalone];\n\n      // build the code to run\n      var code = this.__editor.getCode();\n      // special replacement for unicode \"zero width space\" [BUG #3635]\n      code = code.replace(\"\\u200b\", \"\");\n      code = 'this.info(\"' + this.tr(\"Starting application\").toString() +\n        \" '\" + this.getName() + \"'\" + ' ...\");\\n' +\n        (code || \"\") +\n        'this.info(\"' + this.tr(\"Successfully started\").toString() + '.\");\\n';\n\n      // try to create a function\n      try {\n        this.__oldCode = code;\n        this.fun = qx.event.GlobalError.observeMethod(new Function(code));\n      } catch(ex) {\n        exc = ex;\n      }\n\n      // run the code\n      try {\n        // save the current registry\n        qx.ui.core.queue.Manager.flush();\n        this.__beforeReg = qx.lang.Object.clone(qx.core.ObjectRegistry.getRegistry());\n\n        // run the application\n        this.fun.call(this.__playArea.getApp());\n        qx.ui.core.queue.Manager.flush();\n        this.__afterReg = qx.lang.Object.clone(qx.core.ObjectRegistry.getRegistry());\n      } catch(ex) {\n        exc = ex;\n      }\n\n      // store the new standalone app if available\n      for(var name in reg)\n      {\n        if(this.__isAppClass(name))\n        {\n          this.__currentStandalone = name;\n          this.__executeStandaloneApp(name);\n          break;\n        }\n      }\n\n      // error handling\n      if (exc) {\n        this.error(this.__errorMsg.replace(/\\|/g, \"\\n\") + exc);\n        this.__toolbar.showLog(true);\n        this.__log.show();\n        this.__playArea.reset(this.__beforeReg, this.__afterReg, this.__oldCode);\n      }\n\n      this.__log.fetch();\n    },\n\n\n    /**\n     * Runs the current set sample and checks if it need to be saved to the url.\n     *\n     * @param e {qx.event.type.Event} A possible events (unused)\n     */\n    run : function(e)\n    {\n      var code = this.__editor.getCode();\n      if (code && this.__isCodeNotEqual(code, this.getOriginCode())) {\n        this.__addCodeToHistory(code);\n        if (!this.__modified) {\n          this.setName(this.tr(\"%1 (modified)\", this.getName()));\n        }\n        this.__modified = true;\n      }\n\n      this.__updatePlayground();\n    },\n\n\n    /**\n     * Handler for global errors.\n     *\n     * @param e {Event} The global error event\n     */\n    __onGlobalError : function(e) {\n      this.error(e);\n    },\n\n\n    // ***************************************************\n    // STANDALONE SUPPORT\n    // ***************************************************\n\n    /**\n     * Determines whether the class (given by name) exists in the object\n     * registry and is a qooxdoo application class.\n     *\n     * @param name {String} Name of the class to examine\n     * @return {Boolean} Whether it is a registered application class\n     */\n    __isAppClass : function(name)\n    {\n      if (name === \"qxl.playground.Application\") {\n        return false;\n      }\n      var clazz = qx.Class.$$registry[name];\n      // ria mode supports standalone applications\n      if (this.__mode == \"ria\") {\n        return (\n          clazz && clazz.superclass &&\n          clazz.superclass.classname === \"qx.application.Standalone\"\n        )\n      // mobile mode supports mobild applications\n      } else if (this.__mode == \"mobile\") {\n        return (\n          clazz && clazz.superclass &&\n          clazz.superclass.classname === \"qx.application.Mobile\"\n        )\n      }\n      return false;\n    },\n\n\n    /**\n     * Execute the class (given by name) as a standalone app\n     *\n     * @param name {String} Name of the application class to execute\n     */\n    __executeStandaloneApp : function(name)\n    {\n      var self = this;\n      qx.application.Standalone.prototype._createRootWidget = function() {\n        return self.__playArea.getApp().getRoot();\n      };\n\n      var app = new qx.Class.$$registry[name];\n\n      try {\n        app.main();\n        qx.ui.core.queue.Manager.flush();\n      } catch(ex) {\n        var exc = ex;\n        this.error(this.__errorMsg.replace(/\\|/g, \"\\n\") + exc);\n      }\n    }\n  },\n\n\n  /*\n   *****************************************************************************\n      DESTRUCTOR\n   *****************************************************************************\n   */\n\n  destruct : function()\n  {\n    this.__history = this.__beforeReg = this.__afterReg = null;\n    this._disposeObjects(\n      \"__currentStandalone\", \"__samples\", \"__toolbar\", \"__editor\",\n      \"__playArea\", \"__log\"\n    );\n  }\n});\n"
  ]
}